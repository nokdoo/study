# 3.2.1 Scheduling Queues
---

프로세스는 시스템에 연결될 때 시스템의 모든 프로세스가 들어있는 job queue에 넣어진다. 프로세스는 메인 메모리에 위치하게 되고 실행을 위해서 준비, 대기를 하며 ready queue라 불리는 리스트에서 관리된다. 일반적으로 ready queue는 링크드 리스트로 저장된다. 하나의 ready-queue header는 리스트의 첫 번째와 마지막 번째의 PCB의 포인터를 가지고 있다. 각 PCB는 ready queue 안의 다음 PCB를 가리키는 pointer field를 갖는다.
<br>
시스템은 다른 큐 또한 포함한다. 프로세스가 cpu를 할당 받으면, 프로세스는 결국 종료되고 인터럽트 되거나, i/o 요청의 완료와 같은 특정 이벤트가 발생할 때까지 기다린다. 프로세스가 디스크와 같은 공유된 장치에 대해 i/o요청을 만든다고 가정해보자. 시스템에는 많은 프로세스가 있기 때문에 디스크는 다른 프로세스의 i/o요청으로 바쁠 수 있다. 그러므로 프로세스는 디스크를 기다려야 한다. 특정 i/o 장치를 기다리는 프로세스 리스트는 device queue라고 불린다. 각 장치는 그들의 device queue를 가지고 있다. _(Figure 3.5, p111)_
<br>
프로세스 스케쥴링의 일반적인 표현은 queueing diagram이다. _(Figure 3.6, p112)_ 사각형의 박스는 큐를 나타낸다. 큐는 ready queue와 device queue의 집합 두 가지 형태로 존재한다. 원형 박스는 큐를 지원하는 리소스를 나타내고, 화살표는 시스템에서 프로세스의 흐름을 나타낸다.
<br>
새로운 프로세스는 처음에 ready queue에 넣어진다. 넣어진 프로세스는 실행을 위해 선택되거나 dispatch 되기를 기다린다. 프로세스가 cpu를 할당 받고 실행 중이면 다음의 이벤트 중 하나가 발생할 수 있다.
(ready ---- scheduler dispatch ----> running)
* 프로세스가 i/o요청을 발생시키고 프로세스는 i/o queue에 위치하게 된다.
* 프로세스가 child process를 만들고 child's termination을 기다린다.
* 프로세스는 인터럽트의 결과에 의해 cpu로부터 강제적으로 제거될 수 있고 ready queue로 되돌아 간다.

처음 두 경우 프로세스는 최종적으로 프로세스의 처리를 기다리는 대기 상태에서 cpu할당을 기다리는 준비 상태로 전환된다. 즉, ready queue로 되돌아간다. 하나의 프로세스는 종료될 때까지 이런 순환을 반복한다. 종료될 때 프로세스는 모든 큐에서 제거되고 반환된(작업이 완료됐다고 보는게 맞을듯) PCB와 resource를 가지고 있다.

---

프로세스는 시스템에 등록되는 시점부터 queue에 의해 관리된다.
ready queue에 있는 프로세스는 메모리에 로드된 상태이다.
프로세스는 cpu 할당을 기다리는 ready 상태, 실행을 기다리는 wait 상태가 된다.
cpu가 할당된 프로세스는 인터럽트, 시간 제한, 새로운 프로세스 생성 등에 의해서 다시 ready 상태로 되돌아가며 cpu를 다시 할당 받아 작업을 기다린다. 이 과정 끝에 프로세스는 모든 실행을 완료하고 종료하게 된다.
