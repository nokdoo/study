# Methods for Handling Deadlocks
---

일반적으로, 데드락 문제는 세 가지 방법으로 다룰 수 있다.

* 데드락을 예방하고 회피하기 위해서 프로토콜을 사용하여 시스템이 절대 데드락 상태에 놓이지 않게 보장한다.
* 시스템이 데드락 상태에 들어서고 이를 감지하여 회복할 수 있게 한다.
* 문제를 완전히 무시하고 데드락이 시스템에서 발생하지 않은 척 할 수 있다.

세 번째 솔루션은 Linux와 Windows를 포함하는 대부분의 os에서 사용하는 방법이다. 그러면 데드락을 다루는 프로그램을 작성하는 것은 어플리케이션 개발자의 역할이 된다.

다음으로 우리는 데드락을 다루기 위한 세 방법에 대해 간단히 정교해질 수 있다. 7.4절부터 7.7절까지 자세한 알고리즘을 소개한다. 그전에, os의 resource-allocation problem의 전체 영역에 대해, 기본적인 접근법이 중요하지 않다고 논의한 몇몇 연구자들을 언급해야 한다. 하지만 기본적인 접근법은 결합될 수 있고, 우리가 시스템의 각 자원 클래스에 대한 최적의 접근법을 선택할 수 있게 한다.

데드락이 절대 발생하지 않게 보장하기 위해서 시스템은 deadlock prevention 또는 deadlock avoidance 스키마를 사용할 수 있다. `deadlock prevention`은 최소 하나의 점유될 수 없는 필요 조건(7.2.1절)을 보장하는 메소드 집합을 제공한다. 이 메소드는 자원에 대한 요청이 만들어지는 방법을 제한함으로써 데드락을 예방한다. 7.4절에서 이 방법에 대해서 논의한다.

deadlock avoidance는 os가 사전에 추가적인 정보를 받는 것을 요구하고, 프로세스가 어떤 자원을 요청하고 그 주기 동안 사용할 것인지에 관심을 갖는다. 이 추가적인 정보와 함께 os는 각 요청에 대한 프로세스가 기다려야하는지 아닌지를 결정할 수 있다. 현재 요청이 만족될 수 있는지 또는 기다려야하는지 결정하기 위해, 시스템은 현재 이용 가능한 자원, 각 프로세스에 할당된 자원, 각 프로세스의 향후 요청과 반환에 대해서 고려해야 한다. 이 스키마는 7.5절에서 논의한다.

시스템이 deadlock prevention 또는 deadlock avoidance 알고리즘을 채택하지 않았다면 데드락이 발생할 것이다. 이런 환경에서 시스템은 데드락이 발생했는지와 (발생했다면)데드락으로부터 회복하기 위한 알고리즘을 결정하기 위해서 시스템의 상태를 확인하는 알고리즘을 제공한다. 이 이슈에 대해서는 7.6절과 7.7절에서 논의한다.

데드락을 감지하고 회복하는 알고리즘이 없다면, 시스템이 데드락 상태에 놓여있고 아직 어떤 일이 일어났는지 확인할 방법이 없는 상황에 직면한다. 이런 경우, 실행할 수 없는 프로세스에 의해 자원이 점유되고, 자원을 요청하는 프로세스가 많을수록 데드락 상황에 진입할 것이기 때문에 감지되지 않은 데드락은 시스템의 성능을 악화시킨다. 결국에는 시스템의 기능이 멈추고 수동적인 재시작이 필요할 것이다.

이 방법이 데드락 문제에 대해서 다양한 접근법은 아니지만, 언급했던 것처럼 많은 os에서 사용되고 있다. 데드락의 가능성을 무시하는 것은 다른 접근법 보다 값싸다. 많은 시스템에서 데드락이 드물게 (1년에 한 번꼴)발생하기 때문에 다른 방법에 대한 추가 비용은 가치가 없을 수 있다. 여기에 다른 상태로부터 회복되는데 사용되는 방법은 데드락으로부터 회복되기 위해 사용될 것이다. 몇가지 상황에서, 시스템은 데드락 상태가 아닌 frozen state에 있을 수 있다. 예를 들어 가장 높은 우선순위로 실행되고 os에 제우권을 반환하지 않는 프로세스를 생각할 수 있다. 시스템은 이러한 상태에 대한 수동적인 회복을 가지고 있어야 하며, 데드락을 회복하기 위해서 이 기술을 쉽게 사용할 것이다.
